{% include "header.html" %}
{% block body %}
          <div class="row align-items-center py-4">
         &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;<ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                  <li class="breadcrumb-item"><a href="/profile" class="aaa" style="color: #5fcf80;"><i class="bx bx-home"></i><strong>Accueil</strong></a></li>
                  <li class="breadcrumb-item"><a href="/manage_user" class="aaa" style="color: #5fcf80;"><strong> Gestion des utilisateurs</strong></a></li>
                </ol>
        </div>
  <br>
 <section class="d-flex justify-content-center align-items-center">
<div class="container">

    <div class="row">

        <div class="col md-12">

            <h2>Liste des utilisateurs <div class="pull-right"> <i class="material-icons" class="pull-right" data-toggle="modal" data-target="#myModal" style="font-size:60px;">group_add</i> </div></h2>




    {%with messages = get_flashed_messages()%}

    {%if messages%}

    {% for message in messages %}

    <div class="alert alert-success alert-dismissable" role="alert">

     <button type="button" class="close" data-dismiss="alert" aria-label ="close">

         <span aria-hidden="true">&times;</span>

     </button>
        {{message}}


    </div>


    {%endfor%}
    {%endif%}
    {%endwith%}




            <table class="table table-striped">


                <tr>
              <th>CIN</th>
              <th>Nom</th>
              <th>Email</th>
              <th>Role</th>
              <th>Action</th>


          </tr>





                {% for row in prof %}
                <tr>
                    <td>{{row.0}}</td>
                    <td>{{row.1}}</td>
                    <td>{{row.2}}</td>
                    <td>{{row.4}}</td>
                    <td>


               <a href="/update/{{row.0}}" class="btn btn-xs" data-toggle="modal" data-target="#modaledit{{row.0}}" style="font-size:30px;" ><i class="fa fa-cog" aria-hidden="true"></i></a>
                <a href="/block/{{ row.0 }}" class="btn btn-xs" onclick="return confirm('êtes-vous sûr de bloquer cet utilisateur?')" style="font-size:30px;" ><i class="fa fa-user-times" aria-hidden="true"></i></a>

                    </td>

                </tr>

                <div id="modaledit{{row.0}}" class="modal fade" role="dialog">


   <div class="modal-dialog">


      <div class="modal-content">


         <div class="modal-header">


            <button type="button" class="close" data-dismiss="modal">&times;</button>


            <h4 class="modal-title">Modifier Information</h4>


         </div>


         <div class="modal-body">


            <form action="{{ url_for('update') }}" method="POST">
             <div class="form-group">


                  <label>CIN:</label>
                  <input type="text" class="form-control" name="id" value="{{row.0}}" readonly>


               </div>

               <div class="form-group">


                  <label>Nom:</label>

                  <input type="text" class="form-control" name="name" value="{{row.1}}">


               </div>



               <div class="form-group">


                  <label>Email:</label>

                  <input type="text" class="form-control" name="email" value="{{row.2}}">


               </div>

                 <div class="form-group">
        <label>Role</label>
        <div class="form-control">
        <select name="Role" id="pet-select">
        <option value="{{row.4}}">{{row.4}}</option>
        <option value="admin">Admin</option>
        <option value="moniteur">Moniteur</option>
        <option value="prof">Prof</option>
        <option value="etudiant">Etudiant</option>
        </select>
      </div>
        </div> 



               <div class="form-group">


                  <button class="btn btn-primary" type="sbumit">Modifier</button>


               </div>


            </form>


         </div>


         <div class="modal-footer">


            <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>


         </div>


      </div>


   </div>


</div>


                {% endfor  %}


                </tbody>


            </table>


        </div>


<!-- Modal -->


<div id="myModal" class="modal fade" role="dialog">


   <div class="modal-dialog">


      <div class="modal-content">


         <div class="modal-header">


            <button type="button" class="close" data-dismiss="modal">&times;</button>


            <h4 class="modal-title">Ajouter utilisateur</h4>


         </div>


         <div class="modal-body">


            <form action="{{ url_for('insert') }}" method="POST">

             <div class="form-group">


                  <label>CIN:</label>
                  <input type="text" class="form-control" name="id" required="1">


               </div>

               <div class="form-group">


                  <label>Nom:</label>
                  <input type="text" class="form-control" name="name" required="1">


               </div>


                <div class="form-group">


                  <label>Email:</label>
                  <input type="text" class="form-control" name="email" required="1">


               </div>


                <div class="form-group">


                  <label>Mot de passe:</label>
                  <input type="password" class="form-control" name="motdepasse" required="1">


               </div>



       <div class="form-group">
        <label class="">Role</label>
        <div class="form-control">
        <select name="Role" id="pet-select">
        <option value="">--Please choose an option--</option>
        <option value="admin">Admin</option>
        <option value="moniteur">Moniteur</option>
        <option value="prof">Prof</option>
        <option value="etudiant">Etudiant</option>
        </select>
      </div>
        </div> 
              



               <div class="form-group">


                  <button class="btn btn-primary" type="submit">Ajouter</button>


               </div>


            </form>


         </div>


         <div class="modal-footer">


            <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>


         </div>


      </div>


   </div>


</div>

</div></div>
  </section>
  <main id="main">
  </main>
  <br><br><br><br><br><br>
  <!-- ======= Mobile nav toggle button ======= -->
  <button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>

  <!-- ======= Header ======= -->


    <footer id="footer">

    <div class="container d-md-flex py-4">

      <div class="mr-md-auto text-center text-md-left">
        <div class="copyright">
          &copy; Copyright <strong><span>Education</span></strong>. All Rights Reserved
        </div>
      </div>
      <div class="social-links text-center text-md-right pt-3 pt-md-0">
        <a href="https://twitter.com/jouhainaa_nasri" class="twitter"  style="background: #5fcf80;"><i class="bx bxl-twitter" ></i></a>
        <a href="https://www.facebook.com/maite.perroni1234" class="facebook"  style="background: #5fcf80;"><i class="bx bxl-facebook"></i></a>
        <a href="https://www.instagram.com/jouhainaa_nasri1/" class="instagram"  style="background: #5fcf80;"><i class="bx bxl-instagram"></i></a>
        <a href="https://www.linkedin.com/in/jouhaina-nasri-3b9442168/" class="linkedin"  style="background: #5fcf80;"><i class="bx bxl-linkedin"></i></a>
      </div>
    </div>
  </footer><!-- End Footer -->
  <a href="#" class="back-to-top" style="background: #5fcf80;"><i class="bx bx-up-arrow-alt"></i></a>
  <div id="preloader"></div>
{% endblock %}
  <!-- Vendor JS Files -->
<script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
  <script src="{{ url_for('static',filename='assets1/vendor/jquery/jquery.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/jquery.easing/jquery.easing.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/php-email-form/validate.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/waypoints/jquery.waypoints.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/counterup/counterup.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/isotope-layout/isotope.pkgd.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/venobox/venobox.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/owl.carousel/owl.carousel.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/typed.js/typed.min.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/vendor/aos/aos.js') }}"> </script>
  <script src="{{ url_for('static',filename='assets1/js/main.js') }}"> </script>
